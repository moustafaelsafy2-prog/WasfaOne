<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>تسجيل الدخول • WasfaOne</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --brand:#ef4444;
      --brand-dark:#dc2626;
      --ink:#0f172a;
      --muted:#475569;
      --soft-bg:#f7f7f9;
      --line:#e5e7eb;
    }
    html{ scroll-behavior:smooth }
    body{
      font-family:'Cairo', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--ink); background:var(--soft-bg);
    }

    /* خلفية موحّدة مثل الهيرو */
    .auth-hero{
      position:relative; min-height:100vh; display:grid; place-items:center;
      overflow:hidden;
    }
    .auth-hero::before{
      content:""; position:absolute; inset:0;
      background-image:url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=2070&auto=format&fit=crop');
      background-size:cover; background-position:center;
      transform:scale(1.05);
      filter:saturate(1.05) contrast(1.05);
    }
    .auth-hero::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55));
      backdrop-filter: blur(2px);
    }

    /* هوية العنوان */
    .brand-title{
      background:linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }

    /* بطاقة احترافية موحّدة */
    .pro-card{
      position:relative;
      background:linear-gradient(180deg, #fff, #fafafa);
      border:1px solid var(--line);
      border-radius:28px;
      box-shadow:0 25px 50px -12px rgba(0,0,0,.12);
      transition:transform .25s, box-shadow .25s;
    }
    .pro-card:hover{ transform:translateY(-4px); box-shadow:0 30px 60px -20px rgba(0,0,0,.18) }

    /* حاوية النموذج */
    .auth-wrap{ width:100%; max-width:460px; padding:24px }
    .auth-card{ padding:28px }

    /* الحقول + الأيقونة */
    .field{
      position:relative;
    }
    .field input{
      width:100%; min-height:52px; padding:0 48px 0 14px;
      border:1px solid var(--line); border-radius:16px; background:#fcfdff;
      transition:.2s;
    }
    .field input:focus{
      outline:none; border-color:var(--brand);
      box-shadow:0 0 0 3px rgba(239,68,68,.12);
      background:#fff;
    }
    .field .icon{
      position:absolute; inset-block:0; inset-inline-end:0;
      width:44px; display:grid; place-items:center; color:#9aa4b2; pointer-events:none;
    }
    .field .action{
      position:absolute; inset-block:0; inset-inline-start:0;
      display:grid; place-items:center; width:44px; color:#6b7280;
    }

    /* زر الدخول بنفس ستايل CTA */
    .cta-button{
      position:relative; overflow:hidden;
      display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
      width:100%; border-radius:14px; padding:14px 24px; font-weight:800;
      color:#fff; background:var(--brand);
      box-shadow:0 6px 18px rgba(239,68,68,.28);
      transition:transform .2s, box-shadow .2s, background .2s;
    }
    .cta-button:hover{ background:var(--brand-dark); transform:translateY(-1px); box-shadow:0 10px 26px rgba(239,68,68,.34) }
    .cta-button::after{
      content:""; position:absolute; inset:-2px; border-radius:16px; opacity:0;
      background:radial-gradient(120px 120px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.2), transparent 60%);
      transition:opacity .2s;
    }
    .cta-button.is-hovering::after{ opacity:1 }

    /* سبينر */
    .spinner{
      border:2px solid #fff; border-top-color:transparent; border-radius:999px;
      width:20px; height:20px; animation:spin 1s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }

    /* حركات دخول خفيفة */
    .fade-up{ opacity:0; transform:translateY(12px); animation:fadeUp .6s ease-out .1s forwards }
    @keyframes fadeUp{
      to{ opacity:1; transform:none }
    }

    /* ترويسة مصغّرة أعلى البطاقة */
    .mini-header{
      display:flex; align-items:center; gap:.75rem;
      margin-bottom:10px;
    }
    .mini-badge{
      display:inline-grid; place-items:center; width:42px; height:42px;
      border-radius:12px; background:rgba(239,68,68,.1); border:1px solid rgba(239,68,68,.25);
      color:var(--brand);
    }

    /* روابط */
    .link{ color:var(--brand); font-weight:700 }
    .link:hover{ color:var(--brand-dark); text-decoration:underline }

    /* فوتر شفاف أعلى الخلفية */
    .auth-footer{
      color:#e5e7eb;
      text-shadow:0 1px 2px rgba(0,0,0,.35);
    }
  </style>
</head>
<body>

  <section class="auth-hero">
    <!-- طبقة المحتوى -->
    <div class="relative z-10 auth-wrap">

      <!-- بطاقة تسجيل الدخول -->
      <div class="pro-card auth-card fade-up">
        <!-- شعار وعنوان -->
        <header class="text-center mb-6">
          <div class="inline-flex items-center gap-3">
            <img id="login-logo" class="h-14 w-14 rounded-2xl shadow-md ring-1 ring-white/40" alt="Logo" src="https://placehold.co/60x60/ef4444/ffffff?text=W" />
            <h1 class="text-4xl md:text-5xl font-black brand-title leading-none">WasfaOne</h1>
          </div>
          <p class="text-[var(--muted)] mt-2">مرحبًا بك — من فضلك سجّل دخولك للمتابعة</p>
        </header>

        <!-- شارة صغيرة أعلى النموذج -->
        <div class="mini-header">
          <span class="mini-badge"><i data-lucide="lock" class="w-5 h-5"></i></span>
          <div>
            <div class="font-extrabold">تسجيل الدخول</div>
            <div class="text-xs text-[var(--muted)]">الوصول إلى لوحة Wasfa محمي</div>
          </div>
        </div>

        <!-- النموذج (نفس الآIDs ونفس العمل) -->
        <form id="login-form" class="space-y-5 mt-3">

          <!-- البريد -->
          <div class="field">
            <span class="icon"><i data-lucide="mail" class="w-5 h-5"></i></span>
            <input id="email" class="text-[15px]" placeholder="البريد الإلكتروني" type="email" required />
          </div>

          <!-- كلمة المرور -->
          <div class="field">
            <span class="icon"><i data-lucide="lock-keyhole" class="w-5 h-5"></i></span>
            <input id="password" class="text-[15px]" placeholder="كلمة المرور" type="password" required />
            <button type="button" id="toggle-password" class="action" aria-label="إظهار/إخفاء كلمة المرور">
              <i id="eye-icon" data-lucide="eye" class="w-5 h-5"></i>
              <i id="eye-slash-icon" data-lucide="eye-off" class="w-5 h-5 hidden"></i>
            </button>
          </div>

          <!-- روابط مساعدة -->
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center gap-2 text-[var(--muted)]">
              <i data-lucide="shield-check" class="w-4 h-4"></i>
              <span>جلسة آمنة</span>
            </div>
            <a href="https://wa.me/971502061209" target="_blank" rel="noopener" class="link">نسيت كلمة المرور؟</a>
          </div>

          <!-- زر الدخول (يبقى نفس IDs) -->
          <button id="login-button" class="cta-button" type="submit">
            <span id="button-text">دخول</span>
            <div id="button-spinner" class="spinner hidden"></div>
          </button>

          <!-- رسالة خطأ (لا تتغير) -->
          <div id="login-error" class="text-red-600 text-sm hidden pt-1 text-center"></div>
        </form>

        <!-- روابط سفلى صغيرة -->
        <div class="mt-6 text-center text-sm">
          <a href="privacy.html" class="text-[var(--muted)] hover:text-[var(--ink)] underline decoration-dotted">سياسة الخصوصية</a>
        </div>
      </div>

      <!-- فوتر أعلى الخلفية -->
      <footer class="mt-6 text-center auth-footer text-sm">
        <span>&copy; 2024 Wasfa. جميع الحقوق محفوظة.</span>
      </footer>
    </div>
  </section>

  <!-- منطق الصفحة يبقى كما هو -->
  <script src="login.js"></script>

  <!-- تحسينات تفاعلية صغيرة دون المساس بالمنطق -->
  <script>
    // تهيئة أيقونات Lucide
    lucide.createIcons();

    // تأثير ضوء على زر CTA
    const btn = document.getElementById('login-button');
    if (btn){
      btn.addEventListener('mousemove', (e)=>{
        const r = btn.getBoundingClientRect();
        btn.style.setProperty('--mx', `${e.clientX - r.left}px`);
        btn.style.setProperty('--my', `${e.clientY - r.top}px`);
        btn.classList.add('is-hovering');
      });
      btn.addEventListener('mouseleave', ()=> btn.classList.remove('is-hovering'));
    }

    // شعار احتياطي
    const logo = document.getElementById('login-logo');
    if (logo && !logo.src) {
      logo.src = 'https://placehold.co/60x60/ef4444/ffffff?text=W';
    }

    // تبديل إظهار كلمة المرور — نفس IDs
    const togglePassword = document.getElementById('toggle-password');
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('eye-icon');
    const eyeSlashIcon = document.getElementById('eye-slash-icon');

    togglePassword.addEventListener('click', function() {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      eyeIcon.classList.toggle('hidden');
      eyeSlashIcon.classList.toggle('hidden');
    });

    // محاكاة بسيطة (إن أردت الإبقاء عليها) — لا تغيّر login.js
    const loginForm = document.getElementById('login-form');
    const loginButton = document.getElementById('login-button');
    const buttonText = document.getElementById('button-text');
    const buttonSpinner = document.getElementById('button-spinner');

    loginForm.addEventListener('submit', function(e) {
      // لا نغيّر آلية العمل الفعلية في login.js
      // لو أردت إبقاء المحاكاة الحالية:
      e.preventDefault();
      buttonText.classList.add('hidden');
      buttonSpinner.classList.remove('hidden');
      loginButton.disabled = true;
      loginButton.classList.add('cursor-wait', 'opacity-80');

      setTimeout(() => {
        buttonText.classList.remove('hidden');
        buttonSpinner.classList.add('hidden');
        loginButton.disabled = false;
        loginButton.classList.remove('cursor-wait', 'opacity-80');
        console.log("Login attempt finished.");
      }, 1500);
    });
  </script>
</body>
</html>
